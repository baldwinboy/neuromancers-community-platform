{% load i18n heroicons %}
{# Calendar Sync Buttons Component #}
{# Usage: {% include "includes/calendar_sync.html" with session_type="group" session_id=session.id request_id=request.id %} #}
<div class="calendar_sync flex flex-wrap gap-2 items-center">
    <span class="text-sm text-gray-600 mr-2">{% trans "Add to calendar:" %}</span>
    {# Download ICS #}
    <a href="{% url 'session_calendar_export' session_type=session_type session_id=session_id %}{% if request_id %}?request_id={{ request_id }}{% endif %}"
       class="calendar_sync__button inline-flex items-center gap-1 px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-md text-sm transition-colors"
       title="{% trans "Download .ics file for Apple Calendar, Outlook, etc." %}">
        {% heroicon_mini "calendar" size=16 %}
        <span>iCal</span>
    </a>
    {# Google Calendar #}
    <a href="{% url 'session_calendar_export' session_type=session_type session_id=session_id %}?format=google{% if request_id %}&request_id={{ request_id }}{% endif %}"
       class="calendar_sync__button inline-flex items-center gap-1 px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-md text-sm transition-colors"
       target="_blank"
       rel="noopener noreferrer"
       title="{% trans "Add to Google Calendar" %}">
        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19.5 3h-3V1.5h-1.5V3h-6V1.5H7.5V3h-3C3.675 3 3 3.675 3 4.5v15c0 .825.675 1.5 1.5 1.5h15c.825 0 1.5-.675 1.5-1.5v-15c0-.825-.675-1.5-1.5-1.5zm0 16.5h-15V8.25h15v11.25z" />
        </svg>
        <span>Google</span>
    </a>
    {# Outlook Calendar #}
    <a href="{% url 'session_calendar_export' session_type=session_type session_id=session_id %}?format=outlook{% if request_id %}&request_id={{ request_id }}{% endif %}"
       class="calendar_sync__button inline-flex items-center gap-1 px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-md text-sm transition-colors"
       target="_blank"
       rel="noopener noreferrer"
       title="{% trans "Add to Outlook Calendar" %}">
        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
            <path d="M21.5 3H8.5C7.67 3 7 3.67 7 4.5v15c0 .83.67 1.5 1.5 1.5h13c.83 0 1.5-.67 1.5-1.5v-15c0-.83-.67-1.5-1.5-1.5zM15 18h-4v-2h4v2zm0-4h-4v-2h4v2zm0-4h-4V8h4v2zm5 8h-3v-2h3v2zm0-4h-3v-2h3v2zm0-4h-3V8h3v2zM5 6H2v15c0 1.1.9 2 2 2h13v-2H4V6z" />
        </svg>
        <span>Outlook</span>
    </a>
    {# Yahoo Calendar #}
    <a href="{% url 'session_calendar_export' session_type=session_type session_id=session_id %}?format=yahoo{% if request_id %}&request_id={{ request_id }}{% endif %}"
       class="calendar_sync__button inline-flex items-center gap-1 px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-md text-sm transition-colors"
       target="_blank"
       rel="noopener noreferrer"
       title="{% trans "Add to Yahoo Calendar" %}">
        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15v-4H9v-2h2V9.5c0-1.93 1.57-3.5 3.5-3.5H16v2h-1.5c-.83 0-1.5.67-1.5 1.5V11h3l-.5 2H13v4h-2z" />
        </svg>
        <span>Yahoo</span>
    </a>
</div>
{# Export all sessions button for user dashboard #}
{% if show_export_all %}
    <div class="calendar_sync_all mt-4 pt-4 border-t border-gray-200">
        <a href="{% url 'calendar_export' %}"
           class="inline-flex items-center gap-2 px-4 py-2 bg-accent text-white rounded-lg hover:bg-accent/90 transition-colors">
            {% heroicon_mini "arrow-down-tray" size=18 %}
            <span>{% trans "Export all my sessions to calendar" %}</span>
        </a>
        <p class="text-sm text-gray-500 mt-2">
            {% trans "Download a single .ics file containing all your scheduled sessions" %}
        </p>
    </div>
{% endif %}
