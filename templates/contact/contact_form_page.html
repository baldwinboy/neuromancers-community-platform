{% extends "base.html" %}

{% load allauth i18n wagtailcore_tags wagtailimages_tags %}

{% block body_class %}
    template-contactformpage
{% endblock body_class %}

{% block head_title %}
    {% if page.seo_title %}
        {{ page.seo_title }}
    {% else %}
        {{ page.title }}
    {% endif %}
{% endblock head_title %}

{% block content %}
    {# Render StreamField body blocks if present #}
    {% for block in page.body %}
        {% include_block block %}
    {% endfor %}
    {# Contact form section #}
    <section class="contact-form-section">
        <div class="contact-form-container">

            {% element panel class="auth_panel__contact" %}

                {% slot title %}
                    {{ page.title }}
                {% endslot %}

                {% slot body %}
                    {# Intro text #}
                    {% if page.intro %}<div class="contact-form-intro">{{ page.intro|richtext }}</div>{% endif %}
                    {# Form #}
                    {% pageurl page as action_url %}

                    {% element form form=form method="post" action=action_url tags="entrance,contact" %}

                        {% slot body %}
                            {% csrf_token %}

                            {% element fields form=form unlabeled=True %}
                            {% endelement %}
                        {% endslot %}

                        {% slot actions %}

                            {% element button tags="prominent,contact" type="submit" class="contact-form-submit" %}
                                {% trans "Send Message" %}
                            {% endelement %}
                        {% endslot %}
                    {% endelement %}
                {% endslot %}
            {% endelement %}
        </div>
    </section>
{% endblock content %}
