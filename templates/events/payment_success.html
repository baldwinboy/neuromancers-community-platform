{% extends "base.html" %}

{% load i18n heroicons %}

{% block title %}
    {% trans "Payment Successful" %}
{% endblock title %}

{% block body_class %}
    template-payment-success
{% endblock body_class %}

{% block content %}
    <main class="payment-success">
        {# Success banner #}
        <div class="payment-success__banner">
            {% heroicon_solid "check-circle" size=32 class="payment-success__banner-icon" %}
            <div>
                <h1 class="payment-success__banner-title font-heading">{% trans "Payment Successful!" %}</h1>
                <p class="payment-success__banner-text font-body">{% trans "Your payment has been processed successfully." %}</p>
            </div>
        </div>
        {% if session_request %}
            {# Session card using the reusable component #}
            <section class="payment-success__session">
                <h2 class="payment-success__section-title font-heading">{% trans "Session Details" %}</h2>
                {% if session_card %}
                    {% session_item session=session_card session_type=session_card.type / %}
                {% endif %}
            </section>
            {# Payment details #}
            <section class="payment-success__details">
                <dl class="payment-success__details-grid">
                    <div class="payment-success__detail">
                        <dt>{% trans "Amount Paid" %}</dt>
                        <dd>
                            {{ session_request.session.currency_symbol }}{{ session_request.price }}
                        </dd>
                    </div>
                    <div class="payment-success__detail">
                        <dt>{% trans "Host" %}</dt>
                        <dd>
                            {{ session_request.session.host.first_name }} {{ session_request.session.host.last_name }}
                        </dd>
                    </div>
                    {% if session_request.starts_at %}
                        <div class="payment-success__detail">
                            <dt>{% trans "Session Time" %}</dt>
                            <dd>
                                <dd>
                                    {{ session_request.starts_at|date:"D, M j" }} · {{ session_request.starts_at|time:"g:i A" }} – {{ session_request.ends_at|time:"g:i A" }}
                                </dd>
                            </dd>
                        </div>
                    {% elif session_request.session.starts_at %}
                        <div class="payment-success__detail">
                            <dt>{% trans "Session Time" %}</dt>
                            <dd>
                                <dd>
                                    {{ session_request.session.starts_at|date:"D, M j" }} · {{ session_request.session.starts_at|time:"g:i A" }} – {{ session_request.session.ends_at|time:"g:i A" }}
                                </dd>
                            </dd>
                        </div>
                    {% endif %}
                    {% if session_request.language_display %}
                        <div class="payment-success__detail">
                            <dt>{% trans "Language" %}</dt>
                            <dd>
                                {{ session_request.language_display }}
                            </dd>
                        </div>
                    {% endif %}
                </dl>
            </section>
            {% if session_request.meeting_link %}
                <section class="payment-success__meeting">
                    <a href="{{ session_request.meeting_link }}"
                       target="_blank"
                       class="inline_button inline_button__sessions">
                        {% heroicon_mini "video-camera" size=16 %}
                        {% trans "Join Session" %}
                    </a>
                </section>
            {% endif %}
        {% endif %}
        {# Navigation links #}
        <div class="payment-success__actions">
            <a href="{% url 'accounts_profile' %}"
               class="inline_button inline_button__sessions">
                {% heroicon_mini "user" size=16 %}
                {% trans "View My Sessions" %}
            </a>
            <a href="{% url 'payment_history' %}"
               class="inline_button inline_button__sessions_alt">
                {% heroicon_mini "banknotes" size=16 %}
                {% trans "Payment History" %}
            </a>
        </div>
    </main>
{% endblock content %}
