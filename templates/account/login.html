{% extends "account/base_entrance.html" %}

{% load i18n allauth account %}
{# Page title #}

{% block head_title %}
    {% trans "Sign In" %}
{% endblock head_title %}
{# Page content #}

{% block content %}
    {#  When site registration is available #}
    {% if not SOCIALACCOUNT_ONLY %}
        {# Set login url #}
        {% url 'account_login' as login_url %}
        {# Set a local sign up anchor tag when site registration is available #}

        {% setvar link %}
            <a class="font-body link" href="{{ signup_url }}">
            {% endsetvar %}

            {% setvar end_link %}
            </a>
        {% endsetvar %}
        {# Sign in panel #}

        {% element panel class="auth_panel__signin" %}

            {% slot title %}
                {% trans "Sign in" %}
            {% endslot %}

            {% slot body %}

                {% element p %}
                    {% blocktranslate %}If you have not created an account yet, then please {{ link }}sign up{{ end_link }} first.{% endblocktranslate %}
                {% endelement %}
                {# Option to login with a code instead #}
                {% if LOGIN_BY_CODE_ENABLED %}

                    {% setvar code_link %}
                        <a class="font-body link" href="{{ request_login_code_url }}">
                        {% endsetvar %}

                        {% setvar end_code_link %}
                        </a>
                    {% endsetvar %}

                    {% element p %}
                        {% blocktranslate %}If you have an account and want to sign in with a magic link instead, then {{ code_link }}click here{{ end_code_link }}.{% endblocktranslate %}
                    {% endelement %}
                {% endif %}
                {# Form fields #}

                {% element form form=form method="post" action=login_url tags="entrance,login" %}

                    {% slot body %}
                        {% csrf_token %}

                        {% element fields form=form unlabeled=True %}
                        {% endelement %}
                        {{ redirect_field }}
                    {% endslot %}

                    {% slot actions %}

                        {% element button type="submit" tags="prominent,login" class="auth_button__signin_panel" %}
                            {% trans "Sign In" %}
                        {% endelement %}
                    {% endslot %}
                {% endelement %}
            {% endslot %}
        {% endelement %}
    {% endif %}
{% endblock content %}
